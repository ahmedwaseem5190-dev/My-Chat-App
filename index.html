<!DOCTYPE html>
<html>
<head>
    <title>Black Chat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; padding: 0; }
        #chatBox { height: 82vh; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; }
        .input-area { height: 10vh; padding: 10px; display: flex; background: #111; position: fixed; bottom: 0; width: 100%; box-sizing: border-box; }
        input { flex-grow: 1; padding: 12px; border-radius: 25px; border: none; background: #222; color: #fff; outline: none; }
        button { margin-left: 10px; background: #25D366; color: white; border: none; padding: 10px 20px; border-radius: 25px; font-weight: bold; }
        .msg { background: #222; padding: 10px; border-radius: 10px; margin: 5px 0; width: fit-content; max-width: 80%; border-left: 4px solid #25D366; }
        .user { color: #25D366; font-size: 12px; display: block; font-weight: bold; margin-bottom: 2px; }
    </style>
</head>
<body>
<div id="chatBox"></div>
<div class="input-area">
    <input id="messageInput" type="text" placeholder="Likhen...">
    <button onclick="sendMessage()">Bhejen</button>
</div>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
  import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
  const firebaseConfig = {
    apiKey: "AIzaSyC11evwvnbrNOGC_hTHLp_pIny-XG71U0E",
    authDomain: "my-whatsapp-clone-fec81.firebaseapp.com",
    projectId: "my-whatsapp-clone-fec81",
    storageBucket: "my-whatsapp-clone-fec81.appspot.com",
    messagingSenderId: "162982153761",
    appId: "1:162982153761:web:1d4c0d45570251a7c91d60",
    databaseURL: "https://my-whatsapp-clone-fec81-default-rtdb.firebaseio.com"
  };
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const chatRef = ref(db, "messages");
  window.sendMessage = () => {
    const input = document.getElementById("messageInput");
    if(input.value.trim() !== "") {
      push(chatRef, { text: input.value, user: "Ahmed", time: Date.now() });
      input.value = "";
    }
  };
  onChildAdded(chatRef, (data) => {
    const msg = data.val();
    const div = document.createElement("div");
    div.className = "msg";
    div.innerHTML = `<span class="user">${msg.user}</span> ${msg.text}`;
    const box = document.getElementById("chatBox");
    box.appendChild(div);
    box.scrollTop = box.scrollHeight;
  });
</script>
</body>
</html>
